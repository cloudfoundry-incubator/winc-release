$ErrorActionPreference = "Stop";
trap { $host.SetShouldExit(1) }

Write-Host "Begin winc-network pre-start"

Start-Service -Name http

C:\var\vcap\packages\winc-network\winc-network.exe --action delete --configFile C:\var\vcap\jobs\winc-network\config\interface.json
if ($LASTEXITCODE -ne 0) {
  exit $LASTEXITCODE
}

C:\var\vcap\packages\winc-network\winc-network.exe --action create --configFile C:\var\vcap\jobs\winc-network\config\interface.json
if ($LASTEXITCODE -ne 0) {
  exit $LASTEXITCODE
}

Write-Host "Finished winc-network pre-start"
Exit 0
